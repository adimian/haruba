<div class="container">
  <div class="header-menu">
    <div class="app-name">Haruba</div>
    <div class="header-menu-item" data-bind="click: $root.logout">
      <span class="glyphicon glyphicon glyphicon-off"></span> logout
    </div>
    <div class="header-menu-item" data-bind="click: $root.load_home">
      <span class="glyphicon glyphicon glyphicon-home"></span> Home
    </div>
  </div>
  <div class="menu" data-bind="with: zones">
    <div class="menu-item menu-item-selected" style="border-bottom: 1px solid #385F88;"><span class="glyphicon glyphicon-plus"></span> Create Zone</div>
    <div data-bind="foreach: $data">
      <div class="menu-item" data-bind="text: name,
    									css: { 'menu-item-selected': name == $root.selected_zone_name() },
    									click: $root.load_zone"></div>
    </div>
  </div>
  <div class="content">
    <div class="admin_section" data-bind="with: selected_zone">
      <div class="admin_title">Details</div>
      <div class="admin_content">
        <div class="admin-item">
          <div class="admin-label">Zone:</div>
          <div class="admin-value" data-bind="text: name,
          									  attr: {'data-id': id}"></div>
        </div>
        <div class="admin-item">
          <div class="admin-label">Path:</div>
          <div class="admin-value" data-bind="text: path,
          									  attr: {'data-id': id}"></div>
        </div>
      </div>
    </div>
    <div class="admin_section" data-bind="visible: !!selected_zone()">
      <div class="admin_title">Permissions</div>
      <div class="admin-table">
        <div class="list-row header-row">
	   	  <div class="header-item width-50">
	   	    <div class="input-group admin-search-bar">
		      <span class="input-group-addon" id="basic-addon1"><span class="glyphicon glyphicon-search"></span></span>
			  <input id="searchbar" type="text" class="form-control" placeholder="Search user..." data-bind="value: $root.query, valueUpdate: 'keyup'">
			</div>
	   	  </div>
	   	  <div class="header-item width-5">Read</div>
	   	  <div class="header-item width-5">Write</div>
  	   	  <div class="header-item width-15">Apply to other zones</div>
  	   	  <div class="header-item width-15">Apply to other users</div>
  	   	  <div class="header-item width-10"><input class="btn btn-success admin-search-bar" type="button" value="Save" data-bind="visible: $root.has_changed,
  	   	  																														  click: $root.save_permissions"></div>
	   	</div>
	   	<div id="folder-content" data-bind="with: user_candidates">
	   	  <div data-bind="foreach: $data">
		    <div class="list-row" style="cursor: auto;" data-bind="css: {folder: ptracker.has_changed()}">
		   	  <div class="row-item width-50" data-bind="text: display_name + ' (' + username + ')'"></div>
		      <div class="row-item width-5"><span data-bind="attr: {'class': $root.has_read_rights_css($data)},
		                                                     click: $root.register_pemission_change" data-perm="read"></span></div>
		      <div class="row-item width-5"><span data-bind="attr: {'class': $root.has_write_rights_css($data)},
		                                                     click: $root.register_pemission_change" data-perm="write"></span></div>
		   	  <div class="row-item width-15" style="text-align: center;">
		   	    <input class="btn btn-default admin-search-bar" type="button" data-bind="click: $root.select_zones,
		   	       																		 attr: {value: 'Select (' + ptracker.apply_to_zones.length + ')'}">
		   	  </div>
		   	  <div class="row-item width-15" style="text-align: center;">
		   	    <input class="btn btn-default admin-search-bar" type="button" data-bind="click: $root.select_users,
		   	       																		 attr: {value: 'Select (' + ptracker.apply_to_users.length + ')'}">
		   	  </div>
		    </div>
		    <div class='row_action_box'></div>
		  </div>
		</div>
      </div>
    </div>
  </div>
</div>
<script src="js/adminviewmodel.js"></script>
<script>
ko.cleanNode($('html')[0]);
ko.applyBindings(avm);
</script>